# Telegram Bot для учёта взносов

Телеграм бот для автоматизации учёта и управления взносами. Бот позволяет пользователям регистрироваться через систему одобрения администратором и вести учёт взносов.

## Функциональность

### Для пользователей
- Регистрация в системе (требует одобрения администратора)
- Внесение взносов
- Просмотр истории своих взносов
- Получение информации о задолженностях

### Для администратора
- Управление регистрацией (открытие/закрытие)
- Одобрение/отклонение заявок на регистрацию
- Просмотр статистики по взносам
- Управление пользователями

## Технический стек

- Python 3.12
- aiogram 3.0+ (асинхронная библиотека для Telegram Bot API)
- SQLAlchemy (ORM для работы с базой данных)
- SQLite (база данных)

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/telegram-contribution-bot.git
cd telegram-contribution-bot
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл .env в корневой директории проекта со следующим содержимым:
```
BOT_TOKEN=ваш_токен_бота
DATABASE_URL=database.sqlite3
ADMIN_ID=ваш_telegram_id
```

4. Запустите бота:
```bash
python bot.py
```

## Структура проекта

```
telegram-contribution-bot/
├── requirements.txt      # Зависимости проекта
├── .env                 # Конфигурационный файл
├── bot.py              # Основной файл бота
├── config.py           # Конфигурация
├── database/           # Модуль работы с базой данных
│   ├── __init__.py
│   └── base.py
├── models/             # Модели данных
│   ├── __init__.py
│   ├── user.py
│   ├── settings.py
│   └── contribution.py
└── handlers/           # Обработчики команд
    ├── __init__.py
    ├── base.py
    ├── admin.py
    └── registration.py
```

## Модели данных

### User
- id: Уникальный идентификатор
- telegram_id: ID пользователя в Telegram
- full_name: Полное имя пользователя
- is_approved: Статус одобрения
- is_admin: Признак администратора

### Contribution
- id: Уникальный идентификатор
- user_id: ID пользователя
- timestamp: Время создания записи
- payment_date: Дата платежа
- full_name: ФИО плательщика
- amount: Сумма взноса
- month: За какой месяц взнос
- note: Примечание

### BotSettings
- id: Уникальный идентификатор
- name: Название настройки
- value: Значение настройки

## Команды бота

- /start - Начало работы с ботом
- /help - Показать список команд
- /register - Подать заявку на регистрацию

### Команды администратора
- /toggle_registration - Открыть/закрыть регистрацию

## Разработка

Для добавления новой функциональности:
1. Создайте новый обработчик в директории handlers/
2. Добавьте новые модели в директории models/ при необходимости
3. Зарегистрируйте новый роутер в bot.py

## Лицензия

MIT

## Поддержка

При возникновении проблем создавайте issue в репозитории проекта.
